{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">Dashboard da Carteira</h2>

<h4>Ações</h4>
<table class="table table-striped table-bordered">
    <thead class="table-dark">
        <tr>
            <th>Ticker</th>
            <th>Preço Atual</th>
            <th>Preço Médio</th>
            <th>Quantidade</th>
            <th>Total Investido</th>
            <th>Total Atual</th>
            <th>Lucro</th>
            <th>Rentabilidade</th>
            <th>DY</th>
            <th>P/VP</th>
            <th>ROE</th>
        </tr>
    </thead>
    <tbody>
        {% for acao in dados.acoes %}
        <tr>
            <td>{{ acao.ticker }}</td>
            <td>R$ {{ acao.preco or 0 }}</td>
            <td>R$ {{ (acao.preco_medio or 0) | round(2) }}</td>
            <td>{{ acao.quantidade or 0 }}</td>
            <td>R$ {{ (acao.total_investido or 0) | round(2) }}</td>
            <td>R$ {{ (acao.total_atual or 0) | round(2) }}</td>

            <td style="color: {{ 'green' if (acao.lucro or 0) >= 0 else 'red' }}">
                R$ {{ (acao.lucro or 0) | round(2) }}
            </td>

            <td style="color: {{ 'green' if (acao.rentabilidade or 0) >= 0 else 'red' }}">
                {{ ((acao.rentabilidade or 0) * 100) | round(2) }}%
            </td>

            <td>{{ acao.dy or '-' }}</td>
            <td>{{ acao.pvp or '-' }}</td>
            <td>{{ acao.roe or '-' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<hr>

<h4>FIIs</h4>
<table class="table table-striped table-bordered">
    <thead class="table-dark">
        <tr>
            <th>Ticker</th>
            <th>Preço Atual</th>
            <th>Preço Médio</th>
            <th>Quantidade</th>
            <th>Total Investido</th>
            <th>Total Atual</th>
            <th>Lucro</th>
            <th>Rentabilidade</th>
            <th>DY</th>
            <th>P/VP</th>
        </tr>
    </thead>
    <tbody>
        {% for fii in dados.fiis %}
        <tr>
            <td>{{ fii.ticker }}</td>
            <td>R$ {{ fii.preco or 0 }}</td>
            <td>R$ {{ (fii.preco_medio or 0) | round(2) }}</td>
            <td>{{ fii.quantidade or 0 }}</td>
            <td>R$ {{ (fii.total_investido or 0) | round(2) }}</td>
            <td>R$ {{ (fii.total_atual or 0) | round(2) }}</td>

            <td style="color: {{ 'green' if (fii.lucro or 0) >= 0 else 'red' }}">
                R$ {{ (fii.lucro or 0) | round(2) }}
            </td>

            <td style="color: {{ 'green' if (fii.rentabilidade or 0) >= 0 else 'red' }}">
                {{ ((fii.rentabilidade or 0) * 100) | round(2) }}%
            </td>

            <td>{{ fii.dy or '-' }}</td>
            <td>{{ fii.pvp or '-' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
